<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Consultar Ferramentais — Grupo Sovel</title>

<!-- ======== ESTILO GLOBAL ======== -->
<link rel="stylesheet" href="assets/css/style.css" />

<style>
    body {
        margin: 0;
        padding: 0;
        background: #f3f6fa;
        font-family: "Segoe UI", sans-serif;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        text-align: center;
    }

    h1 {
        margin-top: 40px;
        font-weight: 600;
        color: #1b2e4a;
    }

    /* Caixa geral */
    .container {
        margin-top: 30px;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    /* Barra de pesquisa */
    .search-box {
        width: 420px;
        display: flex;
        gap: 10px;
    }

    .search-box input {
        flex: 1;
        padding: 12px 15px;
        border-radius: 8px;
        border: 1px solid #b8c6d8;
        font-size: 16px;
        outline: none;
        transition: 0.3s;
    }

    .search-box input:focus {
        border-color: #0077cc;
        box-shadow: 0 0 4px rgba(0, 119, 204, 0.45);
    }

    /* Botões */
    button {
        padding: 12px 22px;
        font-size: 15px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        font-weight: 600;
        transition: 0.25s;
    }

    .btn-primary {
        background: #0077cc;
        color: white;
    }

    .btn-primary:hover {
        background: #005fa3;
    }

    .btn-secondary {
        background: #d8dfe8;
        color: #1b2e4a;
    }

    .btn-secondary:hover {
        background: #c2ccd9;
    }

    /* Área de resultados */
    #resultados {
        margin-top: 25px;
        width: 620px;
        padding: 20px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.10);
        display: none;
        text-align: left;
    }

    .item {
        padding: 10px 0;
        border-bottom: 1px solid #e1e6ee;
    }

    /* Rodapé */
    footer {
        background: #0a1e3d;
        color: white;
        padding: 20px 0;
        margin-top: auto;
        text-align: center;
        font-size: 14px;
        letter-spacing: 0.3px;
    }
</style>

</head>
<body>

<h1>Consultar Ferramentais</h1>

<div class="container">

    <div class="search-box">
        <input type="text" id="pesquisa" placeholder="Digite o nome, código ou descrição">
        <button class="btn-primary" onclick="buscarFerramentais()">Pesquisar</button>
        <button class="btn-secondary" onclick="limparPesquisa()">Limpar</button>
    </div>

    <div id="resultados"></div>

</div>

<footer>
    © 2025 Sovel da Amazônia — Todos os direitos reservados.
</footer>

<!-- ==================== FIREBASE ==================== -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getFirestore, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "SUA_APIKEY_AQUI",
        authDomain: "seuProjeto.firebaseapp.com",
        projectId: "seuProjeto",
        storageBucket: "seuProjeto.appspot.com",
        messagingSenderId: "0000000000",
        appId: "1:0000000000:web:xxxxx"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // === Função de busca ===
    window.buscarFerramentais = async () => {
        const termo = document.getElementById("pesquisa").value.trim().toLowerCase();
        const resultadosDiv = document.getElementById("resultados");

        if (termo === "") {
            alert("Digite algo para pesquisar.");
            return;
        }

        resultadosDiv.style.display = "block";
        resultadosDiv.innerHTML = "<p>Buscando...</p>";

        const colRef = collection(db, "ferramentais");
        const snapshot = await getDocs(colRef);

        let encontrados = [];

        snapshot.forEach(doc => {
            const data = doc.data();
            const texto =
                (data.nome || "") +
                " " +
                (data.codigo || "") +
                " " +
                (data.descricao || "");

            if (texto.toLowerCase().includes(termo)) {
                encontrados.push(data);
            }
        });

        if (encontrados.length === 0) {
            resultadosDiv.innerHTML = "<p>Nenhum registro encontrado.</p>";
            return;
        }

        resultadosDiv.innerHTML = "";

        encontrados.forEach(item => {
            resultadosDiv.innerHTML += `
                <div class="item">
                    <strong>Nome:</strong> ${item.nome || "-"}<br>
                    <strong>Código:</strong> ${item.codigo || "-"}<br>
                    <strong>Descrição:</strong> ${item.descricao || "-"}
                </div>
            `;
        });
    };

    // === Limpar pesquisa ===
    window.limparPesquisa = () => {
        document.getElementById("pesquisa").value = "";
        const resultadosDiv = document.getElementById("resultados");
        resultadosDiv.style.display = "none";
        resultadosDiv.innerHTML = "";
    };
</script>

</body>
</html>
